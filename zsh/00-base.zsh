#!/usr/bin/env zsh
# ============================================================================
# 00-base.zsh - Zsh基本設定
# ============================================================================
# このファイルはZshの基本的な動作設定を行います。
# 補完設定は01-completion.zshに移動しました。

# ============================================================================
# 基本的な環境設定
# ============================================================================
# カラー出力を有効化
export CLICOLOR=1

# ============================================================================
# キーバインディング
# ============================================================================
# Emacsキーバインドを使用
bindkey -e

# ============================================================================
# 基本的なシェルオプション
# ============================================================================
# ビープ音を無効化
setopt no_beep

# ディレクトリ操作の改善
setopt auto_cd              # ディレクトリ名だけでcd
setopt auto_pushd           # cdで自動的にpushd
setopt pushd_ignore_dups    # pushdで重複を無視
setopt pushd_silent         # pushdの出力を抑制

# コマンドラインの改善
setopt correct              # コマンドのスペルチェック
setopt correct_all          # コマンドライン全体のスペルチェック
setopt interactive_comments # コマンドラインでもコメント可能

# グロブ機能の拡張
setopt extended_glob        # 拡張グロブ機能
setopt null_glob           # マッチしないグロブを空文字列に展開
setopt numeric_glob_sort   # 数値順でソート

# ジョブ制御
setopt long_list_jobs      # ジョブリストをロング形式で表示
setopt notify              # バックグラウンドジョブの状態変化を即座に報告

# その他の便利な設定
setopt print_eight_bit     # 8ビット目を通すようになり、日本語のファイル名などを見れるようになる
setopt no_flow_control     # Ctrl+S/Ctrl+Qによるフロー制御を無効化
setopt ignore_eof          # Ctrl+Dでログアウトしない
setopt no_hup              # ログアウト時にバックグラウンドジョブをkillしない
setopt no_checkjobs        # exitする時にジョブを確認しない

# ============================================================================
# ディレクトリスタック設定
# ============================================================================
DIRSTACKSIZE=20             # ディレクトリスタックの最大サイズ
setopt auto_pushd          # cd時に自動でpushd
setopt pushd_ignore_dups   # 重複するディレクトリは記録しない
setopt pushd_to_home       # 引数なしのpushdは$HOMEに移動

# ============================================================================
# コマンド履歴の共有設定
# ============================================================================
# 履歴ファイルの設定はhistory.zshで行うが、
# 基本的な動作設定はここで行う
setopt share_history       # 履歴をプロセス間で共有
setopt append_history      # 履歴を追記（上書きしない）