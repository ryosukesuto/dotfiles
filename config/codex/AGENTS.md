# Codex CLI エージェント設定

このファイルは、Codex CLIの動作をカスタマイズするためのインストラクションを定義します。

## 🎯 基本方針

### 言語設定
- **応答言語**: 日本語で応答（コード内コメントは英語を維持）
- **エラーメッセージ**: 日本語で分かりやすく説明

### 開発スタイル
- **コードスタイル**: プロジェクトの既存コーディング規約に従う
- **コード品質**: 構造優先。ファイル分割の適切性 > 細かいスタイル（早期リターン、変数化粒度等は不問）
- **コミットメッセージ**: Conventional Commits形式を使用
- **ドキュメント**: 必要最小限、簡潔で実用的な内容に限定

## 📝 タスク実行ガイドライン

### 1. 事前確認
- タスク実行前に影響範囲を明確化
- 既存コードの規約とパターンを確認
- 必要な依存関係の存在を検証

### 2. 実装アプローチ
- **MVP優先**: 最小限の動作する実装から始める
- **段階的改善**: 機能追加は小さなステップで実施
- **テスト駆動**: 可能な限りテストを書いてから実装

### 3. 品質保証
- コミット前にlint/typecheckを実行
- テストが存在する場合は必ず実行
- セキュリティリスクがないか確認

## 🔧 ツール使用方針

### ファイル操作
- 新規ファイル作成より既存ファイルの編集を優先
- 不要なファイルは作成しない
- ドキュメントファイルは明示的に要求された場合のみ作成

### Git操作
- 機密情報を含まないことを確認してからコミット
- プッシュは明示的に要求された場合のみ実行
- ブランチ戦略はプロジェクトの規約に従う

### 外部ツール連携
- npmスクリプトが定義されていれば活用
- miseで管理されているツールのバージョンを尊重
- CI/CD設定を考慮した実装

## 🚨 セキュリティ方針

### 認証情報
- APIキー、パスワードはハードコードしない
- 環境変数または設定ファイルで管理
- .env.localなどgitignore対象ファイルを活用

### ファイルアクセス
- ホームディレクトリ外へのアクセスは慎重に
- 削除操作前に必ず確認
- シンボリックリンクの扱いに注意

## 💡 プロジェクト固有の設定

### dotfilesリポジトリでの作業
- install.shスクリプトとの整合性を保つ
- シンボリックリンク構造を理解して作業
- ローカル設定ファイル（*.local）の扱いに注意

### パス設定
- ~/src配下のghq管理構造を理解
- プロジェクトルートからの相対パスを優先
- 絶対パスは必要な場合のみ使用

### 開発環境
- Zsh環境を前提とした設定
- macOS環境での動作を優先
- Homebrewでインストールされたツールを活用

## 🔄 ワークフロー最適化

### コマンド実行
1. 実行前に `pwd` で現在位置を確認
2. 必要に応じて適切なディレクトリに移動
3. コマンド実行後は結果を検証

### エラーハンドリング
1. エラー発生時は原因を特定
2. 解決策を提示して実行
3. 解決できない場合は代替案を提示

### パフォーマンス考慮
- 大規模ファイルの操作は段階的に実施
- 不要なファイル読み込みを避ける
- キャッシュを適切に活用

## 🌐 ネットワークとGitHub CLI

- Codex CLIは `network_access=enabled` で稼働していると考え、`api.github.com` への接続は原則可能と判断する
- `gh` コマンドで `error connecting to api.github.com` が出た場合はネットワーク制限を疑う前に `gh auth status` で認証状態を確認し、必要なら `gh auth login` を実行
- 一時的な通信エラーの可能性を考慮し、再実行や `https://www.githubstatus.com/` の確認も行う

## 📊 出力フォーマット

### コード表示
```language
# 構文ハイライト付きで表示
# 実行可能なコードブロックとして提示
```

### コマンド実行結果
- 重要な部分のみを抜粋
- エラーは完全に表示
- 長い出力は要約して提示

### 進捗報告
- タスクの開始と完了を明確に報告
- 予期しない問題は即座に報告
- 次のステップを明確に提示

## 🎨 カスタマイズ

### エイリアス活用
- config.tomlで定義されたショートカットを使用
- プロジェクト固有のnpmスクリプトを優先

### プロンプト拡張
- プロジェクトコンテキストを理解して応答
- 過去の作業履歴を考慮
- ユーザーの好みを学習して適応

## 📚 参考情報

### 関連ツール
- Claude Code: 同様のAI開発ツール（競合/補完関係）
- GitHub Copilot: コード補完に特化
- mise: 開発環境管理ツール

### ドキュメント
- 公式ドキュメント: https://github.com/openai/codex
- コミュニティフォーラム: 問題解決とTips共有
- ローカルREADME: プロジェクト固有の情報
