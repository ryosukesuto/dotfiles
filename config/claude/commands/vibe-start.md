---
description: バイブコーディング開始 - design.mdドラフトとコンテキスト整理
---

# /vibe-start - バイブコーディング開始

設計書（design.md）のドラフトを作成し、Codexレビュー用のコンテキストを整理します。

## ワークフロー概要

```
[vibe-start] → design.md作成 → Codexレビュー → 修正 → plans.md作成へ
```

## ファイル管理ルール

- design.md / plans.md はリポジトリルートの `docs/` ディレクトリに作成
- 命名規則: `docs/YYYY-MM-DD_機能名_design.md`
- 完了・不要になったファイルは `docs/archive/` に移動

```bash
# docsディレクトリがなければ作成（archiveも含む）
mkdir -p docs/archive

# ファイル作成例
touch docs/2024-01-15_user-auth_design.md

# アーカイブ例（プロジェクト完了時）
mv docs/2024-01-15_user-auth_design.md docs/archive/
mv docs/2024-01-15_user-auth_plans.md docs/archive/
```

## 実行手順

### ステップ0: プロジェクトセットアップ（初回のみ）

docs/coding-guidelines.md が存在しない場合、テンプレートから作成：

```bash
# docsディレクトリ作成
mkdir -p docs/archive docs/adr

# coding-guidelines.md がなければ作成
if [ ! -f docs/coding-guidelines.md ]; then
    echo "coding-guidelines.md を作成します"
    # テンプレートから作成（プロジェクトに合わせてカスタマイズ）
fi
```

テンプレート: `~/src/github.com/ryosukesuto/obsidian-notes/04_Docs/Guides/2025-12-03_coding-guidelines_テンプレート.md`

プロジェクトの言語・フレームワークに合わせて不要なセクションを削除してください。

### ステップ1: 要件のヒアリング

ユーザーに以下を確認：

1. 何を実現したいか（目的・ゴール）
2. 現状の課題は何か
3. 技術的・運用的な制約はあるか
4. スコープ外にしたいことはあるか

### ステップ2: コードベースの調査

関連するコードを調査して現状を把握：

```bash
# リポジトリ構造の確認
ls -la

# 関連ファイルの検索（ユーザーの要件に応じて調整）
# 例: 認証関連なら
rg -l "auth|login|session" --type-add 'code:*.{ts,tsx,py,go,rb}' -t code
```

### ステップ3: design.md の作成

以下のテンプレートでドラフトを作成：

```markdown
# タイトル（機能名 / プロジェクト名）

## 1. 概要

- 一言サマリ:
- 担当:
- 関係者:
- 参考チケット / Notion / Slack:

## 2. 背景・問題設定

- 現状の課題
- 発生している事象
- なぜ今対応するのか

## 3. 目的・ゴール

- この変更で達成したい状態
- 成功指標（あれば）

## 4. スコープ

### 4.1 対象
- この対応で変更するもの

### 4.2 非スコープ
- あえて今回は手を付けないもの
- 将来の検討事項があれば明記

## 5. 要件

### 5.1 機能要件（ざっくりでよい）
- ユーザー視点の要件
- システム視点の要件

### 5.2 非機能要件
- パフォーマンス:
- 信頼性・可用性:
- セキュリティ:
- 運用・保守性:

## 6. 現状構成（As-Is）

- 関連システム、コンポーネントの簡単な説明
- 既存のデータフロー / コールフロー

## 7. 提案する構成（To-Be）

### 7.1 全体方針
- どのようなアプローチで解決するか

### 7.2 アーキテクチャ概要
- コンポーネント一覧
- データフロー / コールフローの概要

### 7.3 詳細設計（必要な分だけ）
- モジュール / クラスの責務
- インターフェイスの概要

## 8. トレードオフと選択理由

- 検討した代替案
- 採用しなかった理由
- 現在の案を採用した理由

## 9. リスクと対応方針

- 技術的なリスク
- 対応策や回避策

## 10. オープンな論点・決めていないこと

- 未確定な点
- 他チームとの調整が必要な点
```

### ステップ4: コンテキストの整理

Codexレビュー用に以下のコンテキストを準備：

```markdown
# Project Context

## Goal
- 1〜3行で簡潔に記載

## Constraints
- 技術的制約
- 運用 / セキュリティ制約
- プロダクト側の制約

## Existing System
- 現行フローや構成の重要ポイント

## Scope
- 変更する部分
- 変更しない部分

## Non-functional Requirements
- 性能
- 信頼性
- セキュリティ
- 運用性
```

### ステップ5: ユーザーへの確認

design.md のドラフトを提示し、以下を確認：

1. 目的・ゴールは正しいか
2. スコープは適切か
3. 提案するアプローチに問題はないか

## 出力物

1. `design.md` - 設計書ドラフト
2. コンテキスト整理（Codexレビュー用）

## 次のステップ

ユーザー確認後、`/vibe-review` でCodexにレビューを依頼してください。
