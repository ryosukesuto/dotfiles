---
description: 不要なローカルブランチを安全に削除
---

# 不要なローカルブランチの削除

マージ済みブランチやリモートで削除されたブランチなど、不要なローカルブランチを安全に削除します。

## 削除対象の確認

1. **マージ済みブランチの確認**
   ```bash
   git branch --merged | grep -v "\*" | grep -v "main" | grep -v "master" | grep -v "sandbox"
   ```

2. **リモートで削除されたブランチの確認**
   ```bash
   git fetch --prune
   git branch -vv | grep ': gone]' | awk '{print $1}'
   ```

3. **各ブランチの最終更新日確認**
   ```bash
   for branch in $(git branch | grep -v "\*" | sed 's/^ *//'); do
     echo "$branch: $(git log -1 --format='%cr' $branch)"
   done
   ```

## 削除プロセス

1. **現在のブランチ状況を表示**
   - 全ローカルブランチのリスト
   - マージ済みブランチのハイライト
   - リモートに存在しないブランチのハイライト
   - 各ブランチの最終更新日

2. **削除候補の分類**
   - **安全に削除可能**: マージ済みでリモートに存在しないブランチ
   - **確認が必要**: マージ済みだがリモートに存在するブランチ
   - **注意が必要**: 未マージだがリモートに存在しないブランチ
   - **保持推奨**: 未マージでリモートに存在するブランチ

3. **段階的な削除実行**
   - まず安全に削除可能なブランチから削除
   - 各削除前に確認メッセージを表示
   - `-d`オプションで安全な削除を実行（強制削除は使用しない）

4. **削除結果のサマリー**
   - 削除されたブランチのリスト
   - 残存ブランチとその理由
   - 必要に応じて追加のアクション提案

## 安全性の考慮

- main、master、sandbox、現在のブランチは削除対象から除外
- 未マージの変更があるブランチは `-d` オプションでは削除されない
- 削除前に必ず確認を表示
- 削除は一つずつ実行し、エラーがあれば停止

## 使用例

このコマンドを実行すると：
1. 現在のブランチ状況を分析
2. 削除候補を安全性レベルで分類
3. 安全な削除から順に実行
4. 結果をサマリー表示