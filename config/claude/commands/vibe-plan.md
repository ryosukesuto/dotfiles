---
description: バイブコーディング実装計画 - plans.md作成
---

# /vibe-plan - 実装計画の作成

design.md（設計書）を基に、実装計画（plans.md）を作成します。

## 前提条件

- design.md がCodexレビューでOKになっていること
- `/vibe-review` でMajor issueがないことを確認済み

## ワークフロー概要

```
design.md確定 → [vibe-plan] → plans.md作成 → Codexレビュー → 実装開始
```

## ファイル管理ルール

- plans.md は design.md と同じ `docs/` ディレクトリに作成
- 命名規則: `docs/YYYY-MM-DD_機能名_plans.md`（design.md と日付・機能名を揃える）
- 詳細は `/vibe-start` のファイル管理ルールを参照

## 実行手順

### ステップ1: design.md の確認

設計書を読み込み、以下を把握：

1. 目的・ゴール
2. 提案するアーキテクチャ
3. 変更対象のコンポーネント
4. 非機能要件

### ステップ2: 変更範囲の特定

コードベースを調査し、具体的な変更ファイルを特定：

```bash
# 変更対象のファイルを調査
# design.mdの内容に応じて調整
rg -l "関連キーワード" --type-add 'code:*.{ts,tsx,py,go,rb}' -t code

# ディレクトリ構造の確認
tree -L 3 src/
```

### ステップ3: plans.md の作成

以下のテンプレートで実装計画を作成：

```markdown
# タイトル（実装計画）

## 1. 目的と概要

- 対応する design.md: [リンクまたはパス]
- 一言サマリ:
- 実装のゴール:

## 2. 変更範囲

### 2.1 システム / コンポーネント
- 影響を受けるサービス、モジュール、ジョブなど

### 2.2 ファイル / ディレクトリ
- 変更予定ファイル
- 新規作成ファイル
- 削除予定ファイル（あれば）

## 3. タスク分解

### 3.1 実装タスク
- [ ] タスク1
- [ ] タスク2
- [ ] タスク3

### 3.2 非機能対応タスク
- [ ] ログ出力追加
- [ ] メトリクス追加
- [ ] テスト追加

## 4. PR 方針

- PR の分割単位
- それぞれのPRに含める内容
- レビュー観点のメモ

## 5. マイグレーション計画

### 5.1 手順
1. 手順1
2. 手順2

### 5.2 ロールバック手順
1. ロールバックステップ1
2. ロールバックステップ2

### 5.3 データに関する注意点
- バックフィルの有無
- 既存データと新仕様の整合性

## 6. 検証・テスト計画

- ユニットテスト:
- 結合テスト:
- E2E / 手動テスト:
- 本番前の確認項目:

## 7. リスクと対策（実装フェーズ視点）

- リスク1
  - 内容:
  - 対策:

## 8. スケジュールと工数目安

- 着手予定:
- 完了目安:
- 見込み工数（ざっくりでよい）:
```

### ステップ4: タスク分解のポイント

以下の粒度でタスクを分解：

1. 1タスク = 1PR を意識（大きすぎない）
2. 依存関係を明確にする
3. テスト可能な単位で分割
4. ロールバック可能な単位を意識

### ステップ5: リスク評価

実装フェーズ特有のリスクを洗い出し：

- 既存機能への影響
- データ移行のリスク
- 外部サービス連携のリスク
- パフォーマンスへの影響

## 出力物

1. `plans.md` - 実装計画書

## 次のステップ

plans.md 作成後、`/vibe-review` でCodexにレビューを依頼してください。

OKになったら、以下の手順で実装を開始：

1. `docs/coding-guidelines.md` を読み込む（コーディング規約の確認）
2. plans.md のタスクに従って実装
3. 自己レビュー（lint/test/設計整合性）
4. PR作成 → `/review-pr`
