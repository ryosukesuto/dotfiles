# Claude Code ã¨ Codex ã®é€£æºãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

Claude Codeã¨Codex CLIã®å”æ¥­ãƒ•ãƒ­ãƒ¼ã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã€ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’è§£èª¬ã™ã‚‹ã€‚

## ğŸ“š ç›®æ¬¡

1. [æ¦‚è¦](#æ¦‚è¦)
2. [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
3. [å½¹å‰²åˆ†æ‹…](#å½¹å‰²åˆ†æ‹…)
4. [3ã¤ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ•ã‚§ãƒ¼ã‚º](#3ã¤ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ•ã‚§ãƒ¼ã‚º)
5. [å®Ÿè£…è©³ç´°](#å®Ÿè£…è©³ç´°)
6. [ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰](#ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰)
7. [ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹](#ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹)
8. [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

---

## æ¦‚è¦

### Claude Codeã¨Codexã®å”æ¥­ã®ç›®çš„

Claude Codeã¯**å®Ÿè£…ã¨ã‚³ãƒ¼ãƒ‰ä¿®æ­£**ã‚’æ‹…å½“ã—ã€Codexã¯**èª¿æŸ»ãƒ»åˆ†æãƒ»æ¤œè¨¼**ã‚’æ‹…å½“ã™ã‚‹ã€‚ã“ã‚Œã«ã‚ˆã‚Šé–‹ç™ºã®å“è³ªã¨åŠ¹ç‡ãŒå‘ä¸Šã™ã‚‹ã€‚

```mermaid
graph LR
    User[ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼] --> Claude[ğŸ¤– Claude Code]
    Claude -->|èª¿æŸ»ä¾é ¼| Codex[ğŸ” Codex]
    Codex -->|åˆ†æçµæœ| Claude
    Claude -->|å®Ÿè£…| Code[ğŸ’» ã‚³ãƒ¼ãƒ‰]
    Codex -.->|ãƒ¬ãƒ“ãƒ¥ãƒ¼| Code
    Claude -->|å®Œäº†å ±å‘Š| User
```

### ä¸»è¦ãªåˆ©ç‚¹

- **å“è³ªå‘ä¸Š**: AIã«ã‚ˆã‚‹å®¢è¦³çš„ãªã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: è„†å¼±æ€§ã®æ—©æœŸç™ºè¦‹
- **çŸ¥è­˜å…±æœ‰**: ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã®å­¦ç¿’
- **åŠ¹ç‡åŒ–**: èª¿æŸ»ã¨å®Ÿè£…ã®ä¸¦è¡Œä½œæ¥­

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

```mermaid
graph TB
    subgraph "Claude Codeç’°å¢ƒ"
        CC[Claude Code Agent]
        Hook[codex-review-hook.sh<br/>å¿œç­”ãƒ•ãƒƒã‚¯]
        StatusLine[codex-statusline.sh<br/>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º]
    end

    subgraph "Codex CLI"
        Codex[Codex Agent]
        Config[config.toml<br/>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«]
        Agents[AGENTS.md<br/>ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®šç¾©]
    end

    subgraph "ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚·ã‚¹ãƒ†ãƒ "
        ReviewScript[codex-review.sh<br/>ãƒ¡ã‚¤ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆ]
        Transcript[transcript.jsonl<br/>ä¼šè©±å±¥æ­´]
        Result[review-result.json<br/>ãƒ¬ãƒ“ãƒ¥ãƒ¼çµæœ]
    end

    subgraph "é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ "
        macOS[macOSé€šçŸ¥ã‚»ãƒ³ã‚¿ãƒ¼]
        Slack[Slack Webhook]
    end

    CC -->|å¿œç­”ç”Ÿæˆ| Transcript
    Hook -->|ãƒˆãƒªã‚¬ãƒ¼| ReviewScript
    ReviewScript -->|èª­ã¿è¾¼ã¿| Transcript
    ReviewScript -->|codex exec| Codex
    Codex -->|åˆ†æçµæœ| Result
    ReviewScript -->|é€šçŸ¥| macOS
    ReviewScript -->|é€šçŸ¥| Slack
    StatusLine -->|èª­ã¿è¾¼ã¿| Result
    StatusLine -->|è¡¨ç¤º| CC

    Config -.->|è¨­å®š| Codex
    Agents -.->|å‹•ä½œå®šç¾©| Codex
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```mermaid
sequenceDiagram
    participant U as ãƒ¦ãƒ¼ã‚¶ãƒ¼
    participant CC as Claude Code
    participant H as Hook
    participant RS as Review Script
    participant CX as Codex
    participant N as é€šçŸ¥

    U->>CC: è³ªå•ãƒ»ä¾é ¼
    CC->>CC: å¿œç­”ç”Ÿæˆ
    CC->>transcript.jsonl: å¿œç­”è¨˜éŒ²
    CC-->>H: å¿œç­”å®Œäº†ã‚¤ãƒ™ãƒ³ãƒˆ
    H->>RS: ãƒ¬ãƒ“ãƒ¥ãƒ¼é–‹å§‹
    RS->>transcript.jsonl: æœ€æ–°å¿œç­”æŠ½å‡º
    RS->>RS: ãƒ¬ãƒ“ãƒ¥ãƒ¼å¿…è¦æ€§åˆ¤å®š
    alt ãƒ¬ãƒ“ãƒ¥ãƒ¼å¿…è¦
        RS->>CX: codex exec (ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾é ¼)
        CX->>CX: ã‚³ãƒ¼ãƒ‰åˆ†æ
        CX->>RS: JSONçµæœ
        RS->>result.json: çµæœä¿å­˜
        RS->>N: é€šçŸ¥é€ä¿¡
    else ã‚¹ã‚­ãƒƒãƒ—
        RS->>result.json: skipped
    end
    CC->>result.json: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª
    CC-->>U: å¿œç­”è¡¨ç¤ºï¼ˆã‚¹ã‚³ã‚¢ä»˜ãï¼‰
```

---

## å½¹å‰²åˆ†æ‹…

### CodexãŒã‚„ã‚‹ã“ã¨ï¼ˆèª¿æŸ»ãƒ»åˆ†æï¼‰

| ã‚«ãƒ†ã‚´ãƒª | ã‚¿ã‚¹ã‚¯ä¾‹ |
|---------|---------|
| **ğŸ” èª¿æŸ»** | ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹åˆ†æã€ä¾å­˜é–¢ä¿‚èª¿æŸ»ã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç†è§£ |
| **ğŸ“š ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹** | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã€æ¨å¥¨æ‰‹æ³•ã®ç¢ºèª |
| **ğŸ§ª æŠ€è¡“æ¤œè¨¼** | ãƒ„ãƒ¼ãƒ«ãƒ»ãƒ©ã‚¤ãƒ–ãƒ©ãƒªè©•ä¾¡ã€å®Ÿè£…æ–¹æ³•ã®æ¯”è¼ƒ |
| **ğŸ› ãƒ‡ãƒãƒƒã‚°** | ã‚¨ãƒ©ãƒ¼åŸå› ã®æ·±æ˜ã‚Šã€ãƒ­ã‚°è§£æ |
| **ğŸ—ï¸ è¨­è¨ˆãƒ¬ãƒ“ãƒ¥ãƒ¼** | ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å¦¥å½“æ€§ç¢ºèªã€ä»£æ›¿æ¡ˆã®æ¤œè¨ |
| **âœ… ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼** | PRå·®åˆ†ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€å“è³ªè©•ä¾¡ã€å•é¡ŒæŒ‡æ‘˜ |

### Claude CodeãŒã‚„ã‚‹ã“ã¨ï¼ˆå®Ÿè£…ãƒ»ä¿®æ­£ï¼‰

| ã‚«ãƒ†ã‚´ãƒª | ã‚¿ã‚¹ã‚¯ä¾‹ |
|---------|---------|
| **ğŸ’» å®Ÿè£…** | æ–°æ©Ÿèƒ½ã®å®Ÿè£…ã€ãƒã‚°ä¿®æ­£ |
| **âœï¸ ã‚³ãƒ¼ãƒ‰ä¿®æ­£** | ãƒ¬ãƒ“ãƒ¥ãƒ¼æŒ‡æ‘˜ã¸ã®å¯¾å¿œã€ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚° |
| **ğŸ§ª ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ** | ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã€çµ±åˆãƒ†ã‚¹ãƒˆ |
| **ğŸ“¦ ãƒ‡ãƒ—ãƒ­ã‚¤** | ãƒ“ãƒ«ãƒ‰ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã€CI/CDå®Ÿè¡Œ |
| **ğŸ“ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ** | READMEæ›´æ–°ã€ã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ  |
| **ğŸ”§ è¨­å®šå¤‰æ›´** | è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›†ã€ç’°å¢ƒæ§‹ç¯‰ |

### å”æ¥­ã®åŸå‰‡

```mermaid
graph LR
    subgraph "Codexã®å½¹å‰²"
        Think["ğŸ¤” è€ƒãˆã‚‹"]
        Search["ğŸ” èª¿ã¹ã‚‹"]
        Evaluate["ğŸ“Š è©•ä¾¡ã™ã‚‹"]
    end

    subgraph "Claude Codeã®å½¹å‰²"
        Implement["ğŸ’» å®Ÿè£…ã™ã‚‹"]
        Fix["ğŸ”§ ä¿®æ­£ã™ã‚‹"]
        Execute["â–¶ï¸ å®Ÿè¡Œã™ã‚‹"]
    end

    subgraph "å”æ¥­ã‚µã‚¤ã‚¯ãƒ«"
        Think --> Implement
        Search --> Fix
        Evaluate --> Execute
        Execute --> Think
    end
```

---

## 3ã¤ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ•ã‚§ãƒ¼ã‚º

### ãƒ•ã‚§ãƒ¼ã‚ºæ¦‚è¦

```mermaid
graph LR
    Plan[ğŸ“‹ å®Ÿè£…å‰<br/>è¨ˆç”»ãƒ¬ãƒ“ãƒ¥ãƒ¼] --> Impl[ğŸ’» å®Ÿè£…]
    Impl --> Commit[ğŸ” ã‚³ãƒŸãƒƒãƒˆå‰<br/>ãƒ­ãƒ¼ã‚«ãƒ«ãƒ¬ãƒ“ãƒ¥ãƒ¼]
    Commit --> Test[ğŸ§ª ãƒ†ã‚¹ãƒˆ]
    Test --> PR[ğŸš€ PRä½œæˆ]
    PR --> Review[âœ… PRä½œæˆå‰<br/>æœ€çµ‚ãƒ¬ãƒ“ãƒ¥ãƒ¼]
    Review --> Merge[ğŸ‰ ãƒãƒ¼ã‚¸]
```

### ãƒ•ã‚§ãƒ¼ã‚º1: å®Ÿè£…å‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆè¨ˆç”»ãƒ»TODOï¼‰

**ç›®çš„**: è¨­è¨ˆã®å¦¥å½“æ€§ç¢ºèªã€æ½œåœ¨çš„ãªå•é¡Œã®æ—©æœŸç™ºè¦‹

```mermaid
sequenceDiagram
    participant U as ãƒ¦ãƒ¼ã‚¶ãƒ¼
    participant CC as Claude Code
    participant CX as Codex

    U->>CC: å®Ÿè£…ã—ãŸã„æ©Ÿèƒ½ã‚’èª¬æ˜
    CC->>CC: TODOãƒªã‚¹ãƒˆä½œæˆ
    CC->>CC: å®Ÿè£…è¨ˆç”»ç­–å®š
    U->>CC: /review-plan å®Ÿè¡Œ
    CC->>CX: è¨ˆç”»ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾é ¼
    Note over CX: è¨­è¨ˆè©•ä¾¡<br/>ãƒªã‚¹ã‚¯åˆ†æ<br/>ä»£æ›¿æ¡ˆæ¤œè¨
    CX->>CC: ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
    CC->>CC: è¨ˆç”»ä¿®æ­£
    CC-->>U: æ”¹å–„å¾Œã®è¨ˆç”»æç¤º
```

**ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¾‹**:

```bash
cat > /tmp/plan_review.txt <<'EOF'
# ä¾é ¼ã®ç›®çš„
ä»¥ä¸‹ã®å®Ÿè£…è¨ˆç”»ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€‚

## èƒŒæ™¯ãƒ»ç›®çš„
ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã«JWTæ–¹å¼ã‚’å°å…¥ã—ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã‚’æ”¹å–„ã™ã‚‹ã€‚

## å®Ÿè£…è¨ˆç”»ãƒ»TODO
- [ ] JWTç”Ÿæˆãƒ»æ¤œè¨¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å°å…¥ï¼ˆPyJWTï¼‰
- [ ] èªè¨¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®å®Ÿè£…
- [ ] ãƒˆãƒ¼ã‚¯ãƒ³ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥æ©Ÿèƒ½ã®å®Ÿè£…
- [ ] æ—¢å­˜ã‚»ãƒƒã‚·ãƒ§ãƒ³æ–¹å¼ã‹ã‚‰ã®ç§»è¡Œ

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- Python 3.11
- FastAPI
- PyJWT
- Redisï¼ˆãƒˆãƒ¼ã‚¯ãƒ³ç®¡ç†ï¼‰

## æ‡¸å¿µç‚¹
- ãƒˆãƒ¼ã‚¯ãƒ³ã®å®‰å…¨ãªä¿å­˜æ–¹æ³•
- ãƒªãƒ—ãƒ¬ã‚¤æ”»æ’ƒã¸ã®å¯¾ç­–
- æ—¢å­˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®å½±éŸ¿

## ãƒ¬ãƒ“ãƒ¥ãƒ¼è¦³ç‚¹
1. ğŸš¨ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£: JWTå®Ÿè£…ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
2. âš ï¸ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹: ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼ã®åŠ¹ç‡æ€§
3. ğŸ’¡ ä¿å®ˆæ€§: ç§»è¡Œæˆ¦ç•¥ã®å¦¥å½“æ€§
4. ğŸ“ å®Ÿè£…æ¼ã‚Œ: ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã®è€ƒæ…®

## æœŸå¾…ã™ã‚‹å‡ºåŠ›
- è¨ˆç”»ã®å¦¥å½“æ€§è©•ä¾¡
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ã®æŒ‡æ‘˜
- æ¨å¥¨ã™ã‚‹æ”¹å–„æ¡ˆ
EOF

codex exec "$(cat /tmp/plan_review.txt)"
```

**å®Ÿæ–½ã‚¿ã‚¤ãƒŸãƒ³ã‚°**:
- âœ… ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ã‚¤ãƒ³ãƒ•ãƒ©ã«å½±éŸ¿ã™ã‚‹å¤‰æ›´
- âœ… ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å¤‰æ›´
- âœ… åˆã‚ã¦æ‰±ã†æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- â–³ è¤‡é›‘ãªå®Ÿè£…ï¼ˆ3æ™‚é–“ä»¥ä¸Šï¼‰

---

### ãƒ•ã‚§ãƒ¼ã‚º2: ã‚³ãƒŸãƒƒãƒˆå‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆgit diffï¼‰

**ç›®çš„**: ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ›´ã®å“è³ªç¢ºèªã€ã‚³ãƒŸãƒƒãƒˆå‰ã®æœ€çµ‚ãƒã‚§ãƒƒã‚¯

```mermaid
sequenceDiagram
    participant CC as Claude Code
    participant Test as ãƒ†ã‚¹ãƒˆãƒ»Lint
    participant CX as Codex
    participant Git as Git

    CC->>CC: å®Ÿè£…å®Œäº†
    CC->>Test: ãƒ†ã‚¹ãƒˆãƒ»lintå®Ÿè¡Œ
    Test-->>CC: âœ… å…¨ã¦ã‚°ãƒªãƒ¼ãƒ³
    CC->>CX: git diff ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾é ¼
    Note over CX: å“è³ªè©•ä¾¡<br/>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯<br/>æ”¹å–„ææ¡ˆ
    CX->>CC: ãƒ¬ãƒ“ãƒ¥ãƒ¼çµæœ
    alt å•é¡Œã‚ã‚Š
        CC->>CC: ä¿®æ­£å®Ÿæ–½
        CC->>CX: å†ãƒ¬ãƒ“ãƒ¥ãƒ¼
    else å•é¡Œãªã—
        CC->>Git: ã‚³ãƒŸãƒƒãƒˆ
    end
```

**ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¾‹**:

```bash
cat > /tmp/commit_review.txt <<'EOF'
# ä¾é ¼ã®ç›®çš„
ã‚³ãƒŸãƒƒãƒˆå‰ã®å¤‰æ›´ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€‚

## èƒŒæ™¯ãƒ»ç›®çš„
JWTèªè¨¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’å®Ÿè£…ã€‚

## å®Ÿæ–½æ¸ˆã¿ã®ç¢ºèª
- [x] pytesté€šéï¼ˆ100% coverageï¼‰
- [x] ruff checké€šé
- [x] å‹•ä½œç¢ºèªå®Œäº†ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒï¼‰

## ãƒ¬ãƒ“ãƒ¥ãƒ¼è¦³ç‚¹
1. ğŸš¨ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£: ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼ãƒ­ã‚¸ãƒƒã‚¯
2. âš ï¸ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹: æ¤œè¨¼å‡¦ç†ã®ãƒœãƒˆãƒ«ãƒãƒƒã‚¯
3. ğŸ’¡ ä¿å®ˆæ€§: ã‚³ãƒ¼ãƒ‰å“è³ªã€å¯èª­æ€§
4. ğŸ“ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: docstringã®å¦¥å½“æ€§

## æœŸå¾…ã™ã‚‹å‡ºåŠ›
- è¦‹è½ã¨ã—ã¦ã„ã‚‹å•é¡Œ
- æ”¹å–„ã§ãã‚‹ç‚¹
- ã‚³ãƒŸãƒƒãƒˆå‰ã«å¯¾å¿œã™ã¹ãäº‹é …

**git statusã¨git diffã§å¤‰æ›´å†…å®¹ã‚’ç¢ºèªã—ã¦ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€‚**
EOF

codex exec "$(cat /tmp/commit_review.txt)"
```

**å®Ÿæ–½ã‚¿ã‚¤ãƒŸãƒ³ã‚°**:
- â— ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é–¢é€£å¤‰æ›´ï¼ˆå¿…é ˆï¼‰
- â— Terraformå¤‰æ›´ï¼ˆå¿…é ˆï¼‰
- âœ… è¤‡é›‘ãªå¤‰æ›´ãƒ»å¤§è¦æ¨¡ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
- â–³ é€šå¸¸ã®æ©Ÿèƒ½è¿½åŠ 

---

### ãƒ•ã‚§ãƒ¼ã‚º3: PRä½œæˆå‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆgh pr diffï¼‰

**ç›®çš„**: ãƒãƒ¼ã‚¸å‰ã®æœ€çµ‚ç¢ºèªã€ãƒãƒ¼ãƒ ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®è£œå®Œ

```mermaid
sequenceDiagram
    participant CC as Claude Code
    participant Git as Git/GitHub
    participant CI as CI/CD
    participant CX as Codex
    participant Team as ãƒãƒ¼ãƒ 

    CC->>Git: PRä½œæˆ
    Git->>CI: CIå®Ÿè¡Œ
    CI-->>Git: âœ… å…¨ã¦ã‚°ãƒªãƒ¼ãƒ³
    CC->>CX: gh pr diff ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾é ¼
    Note over CX: PRå·®åˆ†åˆ†æ<br/>å½±éŸ¿ç¯„å›²è©•ä¾¡<br/>ãƒãƒ¼ã‚¸å‰ãƒã‚§ãƒƒã‚¯
    CX->>CC: ãƒ¬ãƒ“ãƒ¥ãƒ¼çµæœ
    alt P0/P1å•é¡Œã‚ã‚Š
        CC->>CC: ä¿®æ­£å®Ÿæ–½
        CC->>Git: ã‚³ãƒŸãƒƒãƒˆè¿½åŠ 
        Git->>CI: å†å®Ÿè¡Œ
        CI-->>Git: âœ… ã‚°ãƒªãƒ¼ãƒ³
        CC->>CX: å†ãƒ¬ãƒ“ãƒ¥ãƒ¼
    else å•é¡Œãªã—
        CC->>Team: ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾é ¼
        Team->>Git: æ‰¿èª
        Git->>Git: ãƒãƒ¼ã‚¸
    end
```

**ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¾‹**:

```bash
cat > /tmp/pr_review.txt <<'EOF'
# ä¾é ¼ã®ç›®çš„
PR #123ã®æœ€çµ‚ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€‚

## èƒŒæ™¯ãƒ»ç›®çš„
JWTèªè¨¼ã®å°å…¥ã«ã‚ˆã‚Šã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã‚’æ”¹å–„ã—ã€ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã‚’å‘ä¸Šã™ã‚‹ã€‚

## PRæƒ…å ±
- å¤‰æ›´è¡Œæ•°: ç´„500è¡Œ
- ä¸»è¦ãƒ•ã‚¡ã‚¤ãƒ«: auth/jwt.py, middleware/auth.py, tests/test_auth.py
- CI/CD: âœ… å…¨ã¦ã‚°ãƒªãƒ¼ãƒ³

## ãƒ¬ãƒ“ãƒ¥ãƒ¼è¦³ç‚¹
1. ğŸš¨ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£: ãƒˆãƒ¼ã‚¯ãƒ³æ¼æ´©ã€ã‚¿ã‚¤ãƒŸãƒ³ã‚°æ”»æ’ƒ
2. âš ï¸ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹: èªè¨¼å‡¦ç†ã®ãƒœãƒˆãƒ«ãƒãƒƒã‚¯
3. ğŸ’¡ ä¿å®ˆæ€§: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã€ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸
4. ğŸ“ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: READMEã€APIä»•æ§˜ã®æ›´æ–°

## æœŸå¾…ã™ã‚‹å‡ºåŠ›
- ãƒãƒ¼ã‚¸å‰ã«å¯¾å¿œã™ã¹ãå•é¡Œï¼ˆP0/P1ï¼‰
- æ”¹å–„ææ¡ˆï¼ˆP2/P3ï¼‰
- æ¬¡ã®PRã§å¯¾å¿œã™ã¹ãæŠ€è¡“çš„è² å‚µ

**gh pr viewã¨gh pr diffã§å·®åˆ†ã‚’ç¢ºèªã—ã¦ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€‚**
EOF

codex exec "$(cat /tmp/pr_review.txt)"
```

**å®Ÿæ–½ã‚¿ã‚¤ãƒŸãƒ³ã‚°**:
- â— å…¨ã¦ã®PRï¼ˆæ¨å¥¨ï¼‰
- â— CI/CDãŒã‚°ãƒªãƒ¼ãƒ³ã«ãªã£ãŸå¾Œï¼ˆå¿…é ˆï¼‰

---

### ãƒ•ã‚§ãƒ¼ã‚ºæ¯”è¼ƒè¡¨

| ãƒ•ã‚§ãƒ¼ã‚º | ã‚¿ã‚¤ãƒŸãƒ³ã‚° | å¿…é ˆåº¦ | å¯¾è±¡ | ã‚¹ã‚­ãƒƒãƒ—å¯èƒ½ãªã‚±ãƒ¼ã‚¹ |
|---------|-----------|--------|------|---------------------|
| **å®Ÿè£…å‰** | å®Ÿè£…é–‹å§‹å‰ | â–³ | è¨ˆç”»ãƒ»TODOãƒ»è¨­è¨ˆ | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°ã€ã‚¿ã‚¤ãƒä¿®æ­£ |
| **ã‚³ãƒŸãƒƒãƒˆå‰** | ãƒ†ã‚¹ãƒˆé€šéå¾Œ | â–³ | git diffï¼ˆãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ›´ï¼‰ | è¨­å®šå€¤ã®ã¿ã®å¤‰æ›´ |
| **PRä½œæˆå‰** | PRä½œæˆå¾Œ | â— | gh pr diffï¼ˆPRå·®åˆ†ï¼‰ | - |

**å¿…é ˆã¨ã™ã‚‹ã‚±ãƒ¼ã‚¹**:
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é–¢é€£ï¼ˆèªè¨¼ã€IAMã€æš—å·åŒ–ï¼‰
- ã‚¤ãƒ³ãƒ•ãƒ©å¤‰æ›´ï¼ˆTerraformã€DBã‚¹ã‚­ãƒ¼ãƒï¼‰
- æœ¬ç•ªå½±éŸ¿ãŒå¤§ãã„å¤‰æ›´

---

## å®Ÿè£…è©³ç´°

### 1. Codexå®Ÿè¡Œã®åŸºæœ¬

```bash
# çŸ­ã„ä¾é ¼ï¼ˆ200æ–‡å­—æœªæº€ï¼‰
codex exec "ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ã‚’åˆ†æ"

# é•·ã„ä¾é ¼ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãå‡ºã—ï¼‰
cat > /tmp/codex_request.txt <<'EOF'
# ä¾é ¼ã®ç›®çš„
PR #123ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€‚

## æ‰‹é †
1. gh pr view --comments ã§PRã®èƒŒæ™¯ç¢ºèª
2. gh pr diff ã§å·®åˆ†ç¢ºèª
3. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»å“è³ªã®è¦³ç‚¹ã§ãƒ¬ãƒ“ãƒ¥ãƒ¼

## æœŸå¾…ã™ã‚‹å‡ºåŠ›
- å„ªå…ˆåº¦åˆ¥ã®å•é¡Œãƒªã‚¹ãƒˆï¼ˆP0-P3ï¼‰
- å…·ä½“çš„ãªæ”¹å–„æ¡ˆ
EOF

codex exec "$(cat /tmp/codex_request.txt)"
```

### 2. è‡ªå‹•ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚·ã‚¹ãƒ†ãƒ 

#### codex-review.sh ã®ä»•çµ„ã¿

```mermaid
graph TB
    Start[codex-review.sh èµ·å‹•] --> Check1{transcript.jsonl<br/>å­˜åœ¨ç¢ºèª}
    Check1 -->|å­˜åœ¨ã—ãªã„| Error[ã‚¨ãƒ©ãƒ¼çµ‚äº†]
    Check1 -->|å­˜åœ¨ã™ã‚‹| Extract[æœ€æ–°å¿œç­”æŠ½å‡º]

    Extract --> Check2{ãƒ¬ãƒ“ãƒ¥ãƒ¼å¿…è¦?}
    Check2 -->|çŸ­ã™ãã‚‹| Skip[ã‚¹ã‚­ãƒƒãƒ—]
    Check2 -->|ãƒ„ãƒ¼ãƒ«ã®ã¿| Skip
    Check2 -->|gitæ“ä½œå®Œäº†| Skip
    Check2 -->|å¿…è¦| Context[ä¼šè©±å±¥æ­´æŠ½å‡º]

    Context --> Exec[codex execå®Ÿè¡Œ]
    Exec --> Timeout{ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ?}

    Timeout -->|ã¯ã„| TimeoutMsg[pendingçµæœ]
    Timeout -->|ã„ã„ãˆ| Parse[JSONè§£æ]

    Parse --> Score[ã‚¹ã‚³ã‚¢è¨ˆç®—]
    Score --> Notify[é€šçŸ¥é€ä¿¡]

    Notify --> Save[çµæœä¿å­˜]
    Skip --> Save
    TimeoutMsg --> Save
    Save --> End[çµ‚äº†]
```

#### ç’°å¢ƒå¤‰æ•°ã«ã‚ˆã‚‹è¨­å®š

```bash
# ~/.env.local ã«è¿½åŠ 
export CODEX_REVIEW_TIMEOUT=10           # ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼ˆç§’ï¼‰
export CODEX_REVIEW_VERBOSE=true         # è©³ç´°ãƒ­ã‚°
export CODEX_REVIEW_NOTIFY=true          # é€šçŸ¥æœ‰åŠ¹åŒ–
export CODEX_REVIEW_SLACK_WEBHOOK="https://hooks.slack.com/..."  # Slacké€šçŸ¥
```

### 3. ã‚«ã‚¹ã‚¿ãƒ ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰

#### /review-pr ã®ä»•çµ„ã¿

```mermaid
graph TB
    User[ãƒ¦ãƒ¼ã‚¶ãƒ¼] -->|/review-pr| Claude[Claude Code]
    Claude --> Read[review-pr.mdèª­ã¿è¾¼ã¿]
    Read --> Expand[ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå±•é–‹]

    Expand --> Step1[ã‚¹ãƒ†ãƒƒãƒ—1: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæŠŠæ¡]
    Step1 --> GH1[gh pr view --comments]
    Step1 --> GH2[gh pr diff]
    Step1 --> GH3[gh pr checks]

    GH3 --> Step2[ã‚¹ãƒ†ãƒƒãƒ—2: Codexåˆ†æ]
    Step2 --> CodexExec[codex exec]

    CodexExec --> Step3[ã‚¹ãƒ†ãƒƒãƒ—3: ä½“ç³»çš„è©•ä¾¡]
    Step3 --> Security[ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£]
    Step3 --> Perf[âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹]
    Step3 --> Quality[ğŸ¯ æ­£ç¢ºæ€§]
    Step3 --> Maint[ğŸ—ï¸ ä¿å®ˆæ€§]

    Security --> Step4[ã‚¹ãƒ†ãƒƒãƒ—4: çµ±åˆãƒ¬ãƒ“ãƒ¥ãƒ¼]
    Perf --> Step4
    Quality --> Step4
    Maint --> Step4

    Step4 --> Output[ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ¸ˆã¿<br/>ãƒ¬ãƒ“ãƒ¥ãƒ¼å‡ºåŠ›]
    Output --> User
```

#### ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒãƒ³ãƒ‰ã®ä½œæˆ

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®ã‚³ãƒãƒ³ãƒ‰
# .claude/commands/deploy.md â†’ /project:deploy

# ãƒ¦ãƒ¼ã‚¶ãƒ¼å›ºæœ‰ã®ã‚³ãƒãƒ³ãƒ‰ï¼ˆå…¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§åˆ©ç”¨ï¼‰
# config/claude/commands/review.md â†’ /user:review
# dotfilesã§ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ç®¡ç†
```

---

## ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰

### ã‚·ãƒŠãƒªã‚ª1: æ–°æ©Ÿèƒ½ã®å®Ÿè£…

```bash
# 1. å®Ÿè£…å‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆè¨ˆç”»ï¼‰
cat > /tmp/plan.txt <<'EOF'
# ä¾é ¼ã®ç›®çš„
ä»¥ä¸‹ã®å®Ÿè£…è¨ˆç”»ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€‚

## èƒŒæ™¯ãƒ»ç›®çš„
[æ©Ÿèƒ½ã®èª¬æ˜]

## å®Ÿè£…è¨ˆç”»ãƒ»TODO
- [ ] ã‚¿ã‚¹ã‚¯1
- [ ] ã‚¿ã‚¹ã‚¯2

## ãƒ¬ãƒ“ãƒ¥ãƒ¼è¦³ç‚¹
1. ğŸš¨ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£: [æ‡¸å¿µç‚¹]
2. âš ï¸ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹: [ãƒã‚§ãƒƒã‚¯é …ç›®]
3. ğŸ’¡ ä¿å®ˆæ€§: [è¨­è¨ˆã®å¦¥å½“æ€§]
EOF
codex exec "$(cat /tmp/plan.txt)"

# 2. å®Ÿè£…
# Claude Codeã§å®Ÿè£…

# 3. ã‚³ãƒŸãƒƒãƒˆå‰ãƒ¬ãƒ“ãƒ¥ãƒ¼
cat > /tmp/commit.txt <<'EOF'
# ä¾é ¼ã®ç›®çš„
ã‚³ãƒŸãƒƒãƒˆå‰ã®å¤‰æ›´ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€‚

## å®Ÿæ–½æ¸ˆã¿
- [x] ãƒ†ã‚¹ãƒˆé€šé
- [x] linté€šé

**git statusã¨git diffã§å¤‰æ›´å†…å®¹ã‚’ç¢ºèªã—ã¦ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€‚**
EOF
codex exec "$(cat /tmp/commit.txt)"

# 4. ã‚³ãƒŸãƒƒãƒˆ
git add .
git commit -m "feat: æ–°æ©Ÿèƒ½å®Ÿè£…"

# 5. PRä½œæˆ
git push origin feature-branch
gh pr create --title "æ–°æ©Ÿèƒ½å®Ÿè£…" --body "..."

# 6. PRä½œæˆå‰ãƒ¬ãƒ“ãƒ¥ãƒ¼
/review-pr  # ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒãƒ³ãƒ‰
```

### ã‚·ãƒŠãƒªã‚ª2: ãƒã‚°ä¿®æ­£

```bash
# 1. åŸå› èª¿æŸ»ï¼ˆCodexæ´»ç”¨ï¼‰
codex exec "ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’åˆ†æã—ã€åŸå› ã‚’ç‰¹å®š:
[ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°]"

# 2. ä¿®æ­£å®Ÿè£…ï¼ˆClaude Codeï¼‰
# Claude Codeã§ä¿®æ­£

# 3. ã‚³ãƒŸãƒƒãƒˆå‰ãƒ¬ãƒ“ãƒ¥ãƒ¼
cat > /tmp/bugfix_review.txt <<'EOF'
# ä¾é ¼ã®ç›®çš„
ãƒã‚°ä¿®æ­£ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€‚

## èƒŒæ™¯
[ãƒã‚°ã®èª¬æ˜]

## ä¿®æ­£å†…å®¹
[ä¿®æ­£ã®æ¦‚è¦]

**git diffã§å¤‰æ›´ã‚’ç¢ºèªã€‚**
EOF
codex exec "$(cat /tmp/bugfix_review.txt)"

# 4. PRä½œæˆ + ãƒ¬ãƒ“ãƒ¥ãƒ¼
gh pr create --title "fix: ãƒã‚°ä¿®æ­£" --body "..."
/review-pr
```

### ã‚·ãƒŠãƒªã‚ª3: Terraformå¤‰æ›´

```bash
# 1. å®Ÿè£…å‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆå¿…é ˆï¼‰
cat > /tmp/tf_plan.txt <<'EOF'
# ä¾é ¼ã®ç›®çš„
Terraformå¤‰æ›´è¨ˆç”»ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€‚

## èƒŒæ™¯ãƒ»ç›®çš„
[å¤‰æ›´ç†ç”±]

## å¤‰æ›´å†…å®¹
- IAMãƒãƒªã‚·ãƒ¼è¿½åŠ 
- S3ãƒã‚±ãƒƒãƒˆè¨­å®šå¤‰æ›´

## ãƒ¬ãƒ“ãƒ¥ãƒ¼è¦³ç‚¹
1. ğŸš¨ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£: éåº¦ãªæ¨©é™ä»˜ä¸ã€å…¬é–‹è¨­å®š
2. âš ï¸ ã‚³ã‚¹ãƒˆ: ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¯ãƒ©ã‚¹ã€ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«
3. ğŸ’¡ ä¿å®ˆæ€§: å‘½åè¦å‰‡ã€å¤‰æ•°åŒ–
EOF
codex exec "$(cat /tmp/tf_plan.txt)"

# 2. å®Ÿè£…
# Claude Codeã§å®Ÿè£…

# 3. ã‚³ãƒŸãƒƒãƒˆå‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆå¿…é ˆï¼‰
cat > /tmp/tf_commit.txt <<'EOF'
# ä¾é ¼ã®ç›®çš„
Terraformå¤‰æ›´ã®ã‚³ãƒŸãƒƒãƒˆå‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€‚

**git diffã§å¤‰æ›´ã‚’ç¢ºèªã—ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’é‡ç‚¹çš„ã«ãƒã‚§ãƒƒã‚¯ã€‚**
EOF
codex exec "$(cat /tmp/tf_commit.txt)"

# 4. PRä½œæˆ + ãƒ¬ãƒ“ãƒ¥ãƒ¼
gh pr create --title "terraform: IAMãƒ»S3è¨­å®šè¿½åŠ " --body "..."
/review-pr

# 5. terraform planç¢ºèªï¼ˆCI/CDï¼‰
gh pr checks --watch
```

---

## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### 1. ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®šã®ä½¿ã„åˆ†ã‘

| PRè¦æ¨¡ | è¡Œæ•° | ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ | å®Ÿè¡Œæ–¹æ³• |
|--------|------|-------------|---------|
| å°è¦æ¨¡ | ~300è¡Œ | 2åˆ†ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ | `codex exec "..."` |
| ä¸­è¦æ¨¡ | 300~1000è¡Œ | 5åˆ† | `CODEX_REVIEW_TIMEOUT=300 codex exec "..."` |
| å¤§è¦æ¨¡ | 1000~2000è¡Œ | 10åˆ† | `CODEX_REVIEW_TIMEOUT=600 codex exec "..."` |
| è¶…å¤§è¦æ¨¡ | 2000è¡Œä»¥ä¸Š | 10åˆ† + é‡ç‚¹æŒ‡ç¤º | é‡ç‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ˜ç¤º |

**Claude Codeã§Bashãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã†å ´åˆ**:

```bash
# å¤§è¦æ¨¡PRãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ10åˆ†ï¼‰
codex exec "..." --timeout 600
```

### 2. Reasoning Levelï¼ˆæ¨è«–ãƒ¬ãƒ™ãƒ«ï¼‰ã®ä½¿ã„åˆ†ã‘

| Reasoning Level | å¿œç­”é€Ÿåº¦ | åˆ†æã®æ·±ã• | é©ç”¨ã‚±ãƒ¼ã‚¹ |
|----------------|---------|-----------|-----------|
| `low` | âš¡ é«˜é€Ÿ | ç°¡æ˜“ | ç°¡å˜ãªèª¿æŸ»ã€ã‚¯ã‚¤ãƒƒã‚¯ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€æ§‹æ–‡ãƒã‚§ãƒƒã‚¯ |
| `medium`ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ | ğŸ”„ ä¸­é€Ÿ | æ¨™æº– | é€šå¸¸ã®PRãƒ¬ãƒ“ãƒ¥ãƒ¼ã€ãƒã‚°èª¿æŸ» |
| `high` | ğŸ¢ ä½é€Ÿ | è©³ç´° | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»ã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è©•ä¾¡ã€å¤§è¦æ¨¡ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚° |

**ä½¿ç”¨ä¾‹**:

```bash
# é«˜é€Ÿãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆç°¡æ˜“ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‰
codex exec --reasoning low "ã“ã®PRã®æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ã‚’ãƒã‚§ãƒƒã‚¯"

# æ¨™æº–ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
codex exec "PR #123ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼"

# è©³ç´°åˆ†æï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é‡è¦–ï¼‰
codex exec --reasoning high "ã“ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¤‰æ›´ã‚’è©³ç´°ã«ãƒ¬ãƒ“ãƒ¥ãƒ¼"
```

**é¸ã³æ–¹ã®ç›®å®‰**:
- **`low`**: æ•°åç§’ã€œ1åˆ†ã§çµæœãŒæ¬²ã—ã„ã€ã‚·ãƒ³ãƒ—ãƒ«ãªç¢ºèªä½œæ¥­
- **`medium`**: 1-3åˆ†ã§æ¨™æº–çš„ãªãƒ¬ãƒ“ãƒ¥ãƒ¼
- **`high`**: 3-5åˆ†ã‹ã‘ã¦å¾¹åº•çš„ã«åˆ†æã—ãŸã„

### 3. ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾é ¼ã®æ§‹é€ ï¼ˆæ¨å¥¨ï¼‰

```markdown
# ä¾é ¼ã®ç›®çš„
[ä½•ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ã»ã—ã„ã‹ - 1æ–‡]

## èƒŒæ™¯ãƒ»ç›®çš„
[ãªãœã“ã®å¤‰æ›´ãŒå¿…è¦ã‹ - 2-3æ–‡]

## ãƒ¬ãƒ“ãƒ¥ãƒ¼è¦³ç‚¹ï¼ˆå„ªå…ˆåº¦ä»˜ãï¼‰
1. ğŸš¨ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£: [å…·ä½“çš„ãªæ‡¸å¿µç‚¹]
2. âš ï¸ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹: [ãƒã‚§ãƒƒã‚¯ã—ã¦ã»ã—ã„ç‚¹]
3. ğŸ’¡ ä¿å®ˆæ€§: [è©•ä¾¡ã—ã¦ã»ã—ã„è¨­è¨ˆ]
4. ğŸ“ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: [ç¢ºèªã—ã¦ã»ã—ã„æ›´æ–°]

## æœŸå¾…ã™ã‚‹å‡ºåŠ›
- å„ªå…ˆåº¦åˆ¥ã®å•é¡Œãƒªã‚¹ãƒˆï¼ˆP0-P3ï¼‰
- å„å•é¡Œã«å¯¾ã™ã‚‹å…·ä½“çš„ãªæ”¹å–„æ¡ˆ
- æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ 

**gh pr diffã§å·®åˆ†ã‚’ç¢ºèªã—ã¦ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€‚**
```

### 4. False Positiveã¸ã®å¯¾å‡¦

Codexã®æŒ‡æ‘˜ã‚’éµœå‘‘ã¿ã«ã›ãšã€Claude CodeãŒæ¤œè¨¼ï¼š

```mermaid
graph LR
    Codex[CodexæŒ‡æ‘˜] --> Verify{Claude Codeæ¤œè¨¼}
    Verify -->|å¦¥å½“| Accept[æ¡ç”¨]
    Verify -->|èª¤æ¤œçŸ¥| Reject[é™¤å¤–]
    Verify -->|è¦èª¿æ•´| Adjust[å„ªå…ˆåº¦èª¿æ•´]

    Accept --> Output[çµ±åˆãƒ¬ãƒ“ãƒ¥ãƒ¼]
    Adjust --> Output
```

**æ¤œè¨¼è¦³ç‚¹**:
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®æ–‡è„ˆãƒ»åˆ¶ç´„
- ãƒãƒ¼ãƒ ã®åˆæ„äº‹é …
- æ—¢å­˜ã®è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³
- æŠ€è¡“çš„è² å‚µã®å—å®¹ç¯„å›²

### 5. é€šçŸ¥è¨­å®šã®æœ€é©åŒ–

```bash
# ~/.env.local

# é–‹ç™ºä¸­: è©³ç´°ãƒ­ã‚° + macOSé€šçŸ¥ã®ã¿
export CODEX_REVIEW_VERBOSE=true
export CODEX_REVIEW_NOTIFY=true
# CODEX_REVIEW_SLACK_WEBHOOK ã¯è¨­å®šã—ãªã„

# ãƒãƒ¼ãƒ é–‹ç™º: Slacké€šçŸ¥è¿½åŠ 
export CODEX_REVIEW_VERBOSE=false
export CODEX_REVIEW_NOTIFY=true
export CODEX_REVIEW_SLACK_WEBHOOK="https://hooks.slack.com/..."
```

### 6. å¤§è¦æ¨¡PRã®æ‰±ã„

```bash
# å®Ÿè£…æ¦‚è¦ã¨é‡ç‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ˜ç¤º
cat > /tmp/large_pr.txt <<'EOF'
# ä¾é ¼ã®ç›®çš„
PR #789ã®å¤§è¦æ¨¡å¤‰æ›´ï¼ˆ2000è¡Œä»¥ä¸Šï¼‰ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€‚

## å®Ÿè£…æ¦‚è¦
èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–

## é‡ç‚¹ãƒ¬ãƒ“ãƒ¥ãƒ¼å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«
1. auth/jwt.py - JWTç”Ÿæˆãƒ»æ¤œè¨¼ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆæœ€é‡è¦ï¼‰
2. auth/password.py - ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥åŒ–
3. middleware/auth.py - èªè¨¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢

## ãƒ¬ãƒ“ãƒ¥ãƒ¼è¦³ç‚¹
1. ğŸš¨ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£: ãƒˆãƒ¼ã‚¯ãƒ³æ¼æ´©ã€ã‚¿ã‚¤ãƒŸãƒ³ã‚°æ”»æ’ƒ
2. âš ï¸ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹: èªè¨¼å‡¦ç†ã®ãƒœãƒˆãƒ«ãƒãƒƒã‚¯
3. ğŸ’¡ ä¿å®ˆæ€§: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã€ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸

**gh pr diffã§å·®åˆ†ã‚’ç¢ºèªã—ã€ä¸Šè¨˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é‡ç‚¹çš„ã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€‚**
**é–¢é€£ã™ã‚‹æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚å¿…è¦ã«å¿œã˜ã¦èª­ã‚“ã§ã€æ•´åˆæ€§ã‚’ç¢ºèªã€‚**
EOF

codex exec "$(cat /tmp/large_pr.txt)"
```

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### 1. CodexãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã™ã‚‹

**ç—‡çŠ¶**: `Review timeout (>10s)` ã‚¨ãƒ©ãƒ¼

**åŸå› **:
- PRè¦æ¨¡ãŒå¤§ãã™ãã‚‹ï¼ˆ2000è¡Œä»¥ä¸Šï¼‰
- ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é…å»¶
- Codex APIã®è² è·

**å¯¾å‡¦æ³•**:

```bash
# ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚’å»¶é•·ï¼ˆç’°å¢ƒå¤‰æ•°ï¼‰
export CODEX_REVIEW_TIMEOUT=300  # 5åˆ†

# ã¾ãŸã¯ä¸€æ™‚çš„ã«è¨­å®š
CODEX_REVIEW_TIMEOUT=600 codex exec "..."

# å¤§è¦æ¨¡PRã¯é‡ç‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®š
```

### 2. ãƒ¬ãƒ“ãƒ¥ãƒ¼çµæœãŒè¡¨ç¤ºã•ã‚Œãªã„

**ç—‡çŠ¶**: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ©ã‚¤ãƒ³ã«ã‚¹ã‚³ã‚¢ãŒè¡¨ç¤ºã•ã‚Œãªã„

**åŸå› **:
- review-result.json ã®ç ´æ
- jq ã‚³ãƒãƒ³ãƒ‰ã®ä¸åœ¨
- ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼

**å¯¾å‡¦æ³•**:

```bash
# ãƒ¬ãƒ“ãƒ¥ãƒ¼çµæœãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèª
cat /tmp/claude-codex-review-$(echo -n "$PWD" | md5 | cut -c1-8).json

# ãƒ­ã‚°ã®ç¢ºèª
tail -f /tmp/claude-codex-review-$(echo -n "$PWD" | md5 | cut -c1-8).log

# jqã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
which jq || brew install jq

# ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ã®ä¿®æ­£
chmod 600 /tmp/claude-codex-review-*.json
```

### 3. Slacké€šçŸ¥ãŒé€ä¿¡ã•ã‚Œãªã„

**ç—‡çŠ¶**: macOSé€šçŸ¥ã¯å±ŠããŒã€Slackã«é€šçŸ¥ã•ã‚Œãªã„

**åŸå› **:
- Webhook URLã®è¨­å®šãƒŸã‚¹
- JSONãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ã®ç ´æ
- ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼

**å¯¾å‡¦æ³•**:

```bash
# Webhook URLã®ç¢ºèª
echo $CODEX_REVIEW_SLACK_WEBHOOK

# è©³ç´°ãƒ­ã‚°ã§é€ä¿¡å†…å®¹ã‚’ç¢ºèª
export CODEX_REVIEW_VERBOSE=true

# æ‰‹å‹•ãƒ†ã‚¹ãƒˆ
curl -X POST -H 'Content-type: application/json' \
    --data '{"text":"Test notification"}' \
    "$CODEX_REVIEW_SLACK_WEBHOOK"
```

### 4. False PositiveãŒå¤šã„

**ç—‡çŠ¶**: CodexãŒä¸é©åˆ‡ãªæŒ‡æ‘˜ã‚’ã™ã‚‹

**åŸå› **:
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®æ–‡è„ˆã‚’ç†è§£ã—ã¦ã„ãªã„
- ãƒãƒ¼ãƒ è¦ç´„ã®è€ƒæ…®ä¸è¶³

**å¯¾å‡¦æ³•**:

```bash
# ã‚ˆã‚Šè©³ç´°ãªæ–‡è„ˆã‚’æä¾›
cat > /tmp/context_review.txt <<'EOF'
# ä¾é ¼ã®ç›®çš„
PR #123ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€‚

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®åˆ¶ç´„
- ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚ˆã‚Šã‚‚å¯èª­æ€§ã‚’å„ªå…ˆã™ã‚‹
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¯æ—¢å­˜ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆcustom_exception.pyï¼‰ã«å¾“ã†
- ãƒ†ã‚¹ãƒˆã¯ pytest + pytest-cov ã‚’ä½¿ç”¨ã—ã€ã‚«ãƒãƒ¬ãƒƒã‚¸80%ä»¥ä¸ŠãŒå¿…é ˆ

## ãƒãƒ¼ãƒ è¦ç´„
- é–¢æ•°åã¯ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹
- docstringã¯Googleå½¢å¼
- å‹ãƒ’ãƒ³ãƒˆã¯å¿…é ˆï¼ˆPython 3.11+ï¼‰

**ä¸Šè¨˜ã®åˆ¶ç´„ã¨ãƒãƒ¼ãƒ è¦ç´„ã‚’è€ƒæ…®ã—ã¦ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€‚**
EOF

codex exec "$(cat /tmp/context_review.txt)"
```

### 5. è¤‡æ•°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§çµæœãŒæ··åœ¨ã™ã‚‹

**ç—‡çŠ¶**: ç•°ãªã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ¬ãƒ“ãƒ¥ãƒ¼çµæœãŒè¡¨ç¤ºã•ã‚Œã‚‹

**åŸå› **: ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒãƒƒã‚·ãƒ¥è¡çªï¼ˆç¨€ï¼‰

**å¯¾å‡¦æ³•**:

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã«çµæœãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèª
WORKDIR_HASH=$(echo -n "$PWD" | md5 | cut -c1-8)
echo "Current hash: $WORKDIR_HASH"
ls -la /tmp/claude-codex-review-${WORKDIR_HASH}*

# å¤ã„çµæœãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤
rm /tmp/claude-codex-review-${WORKDIR_HASH}*
```

---

## å‚è€ƒè³‡æ–™

### é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«

| ãƒ•ã‚¡ã‚¤ãƒ« | èª¬æ˜ |
|---------|------|
| `config/claude/codex-templates.md` | Codexä¾é ¼ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé›† |
| `config/claude/commands/review-pr.md` | PRãƒ¬ãƒ“ãƒ¥ãƒ¼ç”¨ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒãƒ³ãƒ‰ |
| `config/claude/codex-review.sh` | è‡ªå‹•ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆ |
| `config/claude/codex-statusline.sh` | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºã‚¹ã‚¯ãƒªãƒ—ãƒˆ |
| `config/codex/config.toml` | Codex CLIè¨­å®š |
| `config/codex/AGENTS.md` | Codexã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®šç¾© |

### å¤–éƒ¨ãƒªãƒ³ã‚¯

- [Claude Code ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.claude.com/en/docs/claude-code)
- [Codex CLI GitHub](https://github.com/anthropics/codex-cli)
- [Mermaid ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://mermaid.js.org/)

---

## ã¾ã¨ã‚

Claude Codeã¨Codexã®å”æ¥­ã§å®Ÿç¾ã§ãã‚‹ã“ã¨ï¼š

```mermaid
mindmap
  root((Claude Code + Codex))
    å“è³ªå‘ä¸Š
      ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–
      ãƒã‚°æ—©æœŸç™ºè¦‹
      ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹é©ç”¨
    åŠ¹ç‡åŒ–
      èª¿æŸ»æ™‚é–“å‰Šæ¸›
      ãƒ¬ãƒ“ãƒ¥ãƒ¼è‡ªå‹•åŒ–
      ä¸¦è¡Œä½œæ¥­
    å­¦ç¿’
      AIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
      çŸ¥è­˜å…±æœ‰
      ã‚¹ã‚­ãƒ«å‘ä¸Š
    ã‚¹ã‚±ãƒ¼ãƒ«
      å¤§è¦æ¨¡PRå¯¾å¿œ
      ãƒãƒ¼ãƒ æ¨™æº–åŒ–
      ç¶™ç¶šçš„æ”¹å–„
```
