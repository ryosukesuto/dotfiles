# ワークフロー

## Terraform作業時
1. 変更ファイル確認 → 影響範囲の予測と文書化
2. variables.tf更新 → README.md更新確認
3. IAM変更 → セキュリティレビュー必須
4. PR作成前 → mainブランチ（デフォルトブランチ）でローカルと同期
5. PR作成後 → CI/CDのterraform planで結果確認

## PR作成時
1. テンプレート確認 → `.github/PULL_REQUEST_TEMPLATE.md`があれば、その構造に従う
2. 単一改善項目に限定 → 他の改善は意図的に除外して記載
3. テスト・lint通過確認 → CI/CDが全てグリーンであることを確認
4. 変更影響範囲の説明 → 既存機能への影響有無を明記
5. 完了基準の明確化 → 何を持って完了とするかを具体的に記載
6. 次のPR計画を記載 → 残課題と次の改善項目を明示

## コード品質の原則

構造優先: 細部より構造。ファイル分割が適切なら、細かいコーディングスタイルは問題にならない。

- 重視する: ファイル・モジュールの分割粒度、単一責任原則、関数のサイズと責務
- こだわらない: 早期リターン vs ガード節、変数化/メソッド切り出しの粒度
- 既存スタイル尊重: 既存コードに追加・修正する際は、そのファイル/プロジェクトのスタイルに合わせる。ベストプラクティスを理由に依頼されていないスタイル変更を混ぜない

## AWS CLI作業時
1. フェデレーションポータルにログイン
2. 対象AWSアカウントの `...` → `一時的な認証情報を取得`
3. `環境変数の設定` の `コピー` をクリック
4. ターミナルで貼り付けて実行（環境変数がセットされる）
5. AWS CLIコマンドを実行（プロファイル指定不要）

注意: 一時的な認証情報のため、有効期限切れ時は再取得が必要
